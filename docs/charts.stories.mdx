import { Meta } from '@storybook/addon-docs/blocks'

<Meta title="Документация/Создание кастомных графиков" id="common-charts" parameters={{ order: 100 }} />

# Создание новых графиков

Здесь мы раскажем как подключить стилизованую под Consta тему, для тех графиков которых нет в 
Consta charts, но есть в [G2Plot](https://g2plot.antv.vision/en).

#### Создание стилизованного компонента

Для того чтобы стилизовать график вам необходимо подключить два хука:
* `useChart` - хук для создания компонента графика.
* `useChartTheme` - подключение темы для графика.

При использовании `useChartTheme` сразу же подключаются все предустановленные цвета для различных элементов графика: 
цвета осей, шрифты, цвет тектса, стили для тултипа и т.д.

Для использования `useChart` вам в первую очередь необходимо подключить тему через `useChartTheme` и прокинуть в него сам подключаемый компонент, 
а также объект с темой и необходимыми свойствами:

```tsx
const theme = useChartTheme()
const { chart, container } = useChart(G2PlotSomeChart, { ...props, theme })
```

Хук вернет ref для элемента в который будет вставляться график (`container`), а также ref для 
объекта стилизации графика (`chart`).

#### Пример использования

```tsx
import React, { useEffect, useImperativeHandle } from 'react'
import { SomeChart as G2PlotSomeChart, SomeChartOptions } from '@antv/g2plot'
import { useForkRef } from '@consta/uikit/useForkRef'

import { useChart, ContainerProps, Tooltip } from '@consta/charts/useChart'
import { useChartTheme } from '@consta/charts/useChartTheme'
import { getChart } from '@consta/charts/getChart'


type ExcludeProps = 'tooltip' | 'children' | 'theme' ...

type SomeChartProps<ITEM> = Omit<SomeChartOptions, ExcludeProps> & {
  tooltip?: Tooltip<ITEM>
} & ContainerProps

type SomeChartComponentType = <ITEM>(props: SomeChartProps<ITEM>) => React.ReactElement | null

export const SomeChart: SomeChartComponentType = React.forwardRef((props, ref) => {
  const {
    chartRef,
    className,
    ...rest
  } = props
  const theme = useChartTheme()
  const { chart, container } = useChart(G2PlotSomeChart, { ...rest, theme })

  useEffect(() => {
    getChart(chartRef, chart.current)
  }, [chart.current])

  useImperativeHandle(chartRef, () => ({
    getChart: () => chart.current,
  }))

  return <div style={style} ref={useForkRef([ref, container])} className={className} />
})
```
